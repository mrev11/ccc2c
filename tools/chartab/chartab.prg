
/*
 *  CCC - The Clipper to C++ Compiler
 *  Copyright (C) 2005 ComFirm BT.
 *
 *  This library is free software; you can redistribute it and/or
 *  modify it under the terms of the GNU Lesser General Public
 *  License as published by the Free Software Foundation; either
 *  version 2 of the License, or (at your option) any later version.
 *
 *  This library is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *  Lesser General Public License for more details.
 *
 *  You should have received a copy of the GNU Lesser General Public
 *  License along with this library; if not, write to the Free Software
 *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */

//karakter konverziós táblák generálása



****************************************************************************
//lower() és upper() Clipper függvényekhez
****************************************************************************

static upper2lower:={;
  {"A","a"},;
  {"B","b"},;
  {"C","c"},;
  {"D","d"},;
  {"E","e"},;
  {"F","f"},;
  {"G","g"},;
  {"H","h"},;
  {"I","i"},;
  {"J","j"},;
  {"K","k"},;
  {"L","l"},;
  {"M","m"},;
  {"N","n"},;
  {"O","o"},;
  {"P","p"},;
  {"Q","q"},;
  {"R","r"},;
  {"S","s"},;
  {"T","t"},;
  {"U","u"},;
  {"V","v"},;
  {"W","w"},;
  {"X","x"},;
  {"Y","y"},;
  {"Z","z"},;
  {143,160},; //Á -> á
  {144,130},; //É -> é
  {140,161},; //Í -> í
  {141,161},; //Í -> í
  {149,162},; //Ó -> ó
  {153,148},; //Ö -> ö
  {167,147},; //Õ -> õ
  {151,163},; //Ú -> ú
  {154,129},; //Ü -> ü
  {152,150},; //Û -> û
  {193,225},; 
  {201,233},;  
  {205,237},;  
  {211,243},;  
  {214,246},;  
  {212,244},;  
  {213,245},;  
  {218,250},;  
  {220,252},;  
  {219,251} } 


static lower2upper:={;
  {"a","A"},;
  {"b","B"},;
  {"c","C"},;
  {"d","D"},;
  {"e","E"},;
  {"f","F"},;
  {"g","G"},;
  {"h","H"},;
  {"i","I"},;
  {"j","J"},;
  {"k","K"},;
  {"l","L"},;
  {"m","M"},;
  {"n","N"},;
  {"o","O"},;
  {"p","P"},;
  {"q","Q"},;
  {"r","R"},;
  {"s","S"},;
  {"t","T"},;
  {"u","U"},;
  {"v","V"},;
  {"w","W"},;
  {"x","X"},;
  {"y","Y"},;
  {"z","Z"},;
  {160,143},; 
  {130,144},; 
  {161,140},; 
  {162,149},; 
  {148,153},; 
  {147,167},; 
  {163,151},; 
  {129,154},; 
  {150,152},; 
  {225,193},; //Á 
  {233,201},; //É 
  {237,205},; //Í 
  {243,211},; //Ó 
  {246,214},; //Ö 
  {244,212},; //Õ 
  {245,213},; //Õ 
  {250,218},; //Ú 
  {252,220},; //Ü 
  {251,219} } //Û 

 
 
****************************************************************************
//CCC --> CWI
//Latin ékezetes betûk CWI ékezetesre
//Csiszár féle permutált dobozrajzolók CWI dobozrajzolóra
//minden más helyben marad
****************************************************************************
 
static ccc2cwi:={;
  {225, 160 },; //á
  {233, 130 },; //é
  {237, 161 },; //í
  {243, 162 },; //ó
  {246, 148 },; //ö
  {244, 147 },; //õ circ
  {245, 147 },; //õ tilde 
  {250, 163 },; //ú
  {252, 129 },; //ü
  {251, 150 },; //û
  ;         
  {193, 143 },; //Á
  {201, 144 },; //É
  {205, 140 },; //Í
  {211, 149 },; //Ó
  {214, 153 },; //Ö
  {212, 167 },; //Õ circ
  {213, 167 },; //Õ tilde
  {218, 151 },; //Ú
  {220, 154 },; //Ü
  {219, 152 },; //Û
  ;
  {164, 179 },; // ³: 0xb3    
  {165, 180 },; // ´: 0xb4
  {166, 181 },; // µ: 0xb5
  {168, 182 },; // ¶: 0xb6
  {169, 183 },; // ·: 0xb7
  {170, 184 },; // ¸: 0xb8
  {171, 185 },; // ¹: 0xb9
  {172, 186 },; // º: 0xba
  {173, 187 },; // »: 0xbb
  {174, 188 },; // ¼: 0xbc
  {175, 189 },; // ½: 0xbd
  {176, 190 },; // ¾: 0xbe
  {177, 191 },; // ¿: 0xbf
  {178, 192 },; // À: 0xc0
  {179, 193 },; // Á: 0xc1  
  {180, 194 },; // Â: 0xc2
  {181, 195 },; // Ã: 0xc3
  {182, 196 },; // Ä: 0xc4
  {183, 197 },; // Å: 0xc5
  {184, 198 },; // Æ: 0xc6
  {185, 199 },; // Ç: 0xc7
  {186, 200 },; // È: 0xc8
  {187, 201 },; // É: 0xc9  
  {188, 202 },; // Ê: 0xca
  {189, 203 },; // Ë: 0xcb
  {190, 204 },; // Ì: 0xcc
  {191, 205 },; // Í: 0xcd  
  {192, 206 },; // Î: 0xce
  {194, 207 },; // Ï: 0xcf
  {195, 208 },; // Ð: 0xd0
  {196, 209 },; // Ñ: 0xd1
  {197, 210 },; // Ò: 0xd2
  {198, 211 },; // Ó: 0xd3  
  {199, 212 },; // Õ: 0xd4  
  {200, 213 },; // Õ: 0xd5  
  {202, 214 },; // Ö: 0xd6  
  {203, 215 },; // ×: 0xd7
  {204, 216 },; // Ø: 0xd8
  {206, 217 },; // Ù: 0xd9
  {207, 218 },; // Ú: 0xda  
  ;
  {157, 176 },; // °
  {159, 177 },; // ±
  {249, 178 },; // ²
  {254, 219 } } // Û        


****************************************************************************
//CWI --> CCC
//CWI dobozrajzolók Csiszár féle permutált dobozrajzolóra
//minden más helyben marad
****************************************************************************
 
static cwi2ccc:={;
  {179, 164 },; // ³: 0xb3    
  {180, 165 },; // ´: 0xb4
  {181, 166 },; // µ: 0xb5
  {182, 168 },; // ¶: 0xb6
  {183, 169 },; // ·: 0xb7
  {184, 170 },; // ¸: 0xb8
  {185, 171 },; // ¹: 0xb9
  {186, 172 },; // º: 0xba
  {187, 173 },; // »: 0xbb
  {188, 174 },; // ¼: 0xbc
  {189, 175 },; // ½: 0xbd
  {190, 176 },; // ¾: 0xbe
  {191, 177 },; // ¿: 0xbf
  {192, 178 },; // À: 0xc0
  {193, 179 },; // Á: 0xc1  
  {194, 180 },; // Â: 0xc2
  {195, 181 },; // Ã: 0xc3
  {196, 182 },; // Ä: 0xc4
  {197, 183 },; // Å: 0xc5
  {198, 184 },; // Æ: 0xc6
  {199, 185 },; // Ç: 0xc7
  {200, 186 },; // È: 0xc8
  {201, 187 },; // É: 0xc9  
  {202, 188 },; // Ê: 0xca
  {203, 189 },; // Ë: 0xcb
  {204, 190 },; // Ì: 0xcc
  {205, 191 },; // Í: 0xcd  
  {206, 192 },; // Î: 0xce
  {207, 194 },; // Ï: 0xcf
  {208, 195 },; // Ð: 0xd0
  {209, 196 },; // Ñ: 0xd1
  {210, 197 },; // Ò: 0xd2
  {211, 198 },; // Ó: 0xd3  
  {212, 199 },; // Õ: 0xd4  
  {213, 200 },; // Õ: 0xd5  
  {214, 202 },; // Ö: 0xd6  
  {215, 203 },; // ×: 0xd7
  {216, 204 },; // Ø: 0xd8
  {217, 206 },; // Ù: 0xd9
  {218, 207 },; // Ú: 0xda  
  ;
  {176, 157 },; // °
  {177, 159 },; // ±
  {178, 249 },; // ²
  {219, 254 } } // Û        


****************************************************************************
//CCC --> LAT
//CWI ékezetes betûk Latin ékezetesre
//minden más helyben marad
****************************************************************************
 
static ccc2lat:={;
  {160, 225 },; //á
  {130, 233 },; //é
  {161, 237 },; //í
  {162, 243 },; //ó
  {148, 246 },; //ö
  {147, 245 },; //õ 
  {244, 245 },; //õ 
  {163, 250 },; //ú
  {129, 252 },; //ü
  {150, 251 },; //û
  ;         
  {143, 193 },; //Á
  {144, 201 },; //É
  {140, 205 },; //Í
  {141, 205 },; //Í 
  {149, 211 },; //Ó
  {153, 214 },; //Ö
  {167, 213 },; //Õ 
  {212, 213 },; //Õ 
  {151, 218 },; //Ú
  {154, 220 },; //Ü
  {152, 219 } } //Û


****************************************************************************
//LAT --> CCC
//minden helyben marad
****************************************************************************

static lat2ccc:={{0,0}}



****************************************************************************
//CCC --> WIN
//CWI ékezetes betûk Latin ékezetesre
//Csiszár féle permutált dobozrajzolók blankre
//minden más helyben marad
****************************************************************************
 
static ccc2win:={;
  {160, 225 },; //á
  {130, 233 },; //é
  {161, 237 },; //í
  {162, 243 },; //ó
  {148, 246 },; //ö
  {147, 245 },; //õ 
  {163, 250 },; //ú
  {129, 252 },; //ü
  {150, 251 },; //û
  ;         
  {143, 193 },; //Á
  {144, 201 },; //É
  {140, 205 },; //Í
  {141, 205 },; //Í 
  {149, 211 },; //Ó
  {153, 214 },; //Ö
  {167, 213 },; //Õ 
  {151, 218 },; //Ú
  {154, 220 },; //Ü
  {152, 219 },; //Û
  ;
  {164, 32 },; // ³: 0xb3    
  {165, 32 },; // ´: 0xb4
  {166, 32 },; // µ: 0xb5
  {168, 32 },; // ¶: 0xb6
  {169, 32 },; // ·: 0xb7
  {170, 32 },; // ¸: 0xb8
  {171, 32 },; // ¹: 0xb9
  {172, 32 },; // º: 0xba
  {173, 32 },; // »: 0xbb
  {174, 32 },; // ¼: 0xbc
  {175, 32 },; // ½: 0xbd
  {176, 32 },; // ¾: 0xbe
  {177, 32 },; // ¿: 0xbf
  {178, 32 },; // À: 0xc0
  {179, 32 },; // Á: 0xc1  
  {180, 32 },; // Â: 0xc2
  {181, 32 },; // Ã: 0xc3
  {182, 32 },; // Ä: 0xc4
  {183, 32 },; // Å: 0xc5
  {184, 32 },; // Æ: 0xc6
  {185, 32 },; // Ç: 0xc7
  {186, 32 },; // È: 0xc8
  {187, 32 },; // É: 0xc9  
  {188, 32 },; // Ê: 0xca
  {189, 32 },; // Ë: 0xcb
  {190, 32 },; // Ì: 0xcc
  {191, 32 },; // Í: 0xcd  
  {192, 32 },; // Î: 0xce
  {194, 32 },; // Ï: 0xcf
  {195, 32 },; // Ð: 0xd0
  {196, 32 },; // Ñ: 0xd1
  {197, 32 },; // Ò: 0xd2
  {198, 32 },; // Ó: 0xd3  
  {199, 32 },; // Õ: 0xd4  
  {200, 32 },; // Õ: 0xd5  
  {202, 32 },; // Ö: 0xd6  
  {203, 32 },; // ×: 0xd7
  {204, 32 },; // Ø: 0xd8
  {206, 32 },; // Ù: 0xd9
  {207, 32 },; // Ú: 0xda  
  ;
  {157, 32 },; // °
  {159, 32 },; // ±
  {249, 32 },; // ²
  {254, 32 } } // Û        
 

 

****************************************************************************
//CWI kódolású stringek ékezetlenítése kereséshez
****************************************************************************

static cwi2search:={;
  {"A","a"},;
  {"B","b"},;
  {"C","c"},;
  {"D","d"},;
  {"E","e"},;
  {"F","f"},;
  {"G","g"},;
  {"H","h"},;
  {"I","i"},;
  {"J","j"},;
  {"K","k"},;
  {"L","l"},;
  {"M","m"},;
  {"N","n"},;
  {"O","o"},;
  {"P","p"},;
  {"Q","q"},;
  {"R","r"},;
  {"S","s"},;
  {"T","t"},;
  {"U","u"},;
  {"V","v"},;
  {"W","w"},;
  {"X","x"},;
  {"Y","y"},;
  {"Z","z"},;
  {160,"a"},; //á
  {130,"e"},; //é
  {161,"i"},; //í
  {162,"o"},; //ó
  {148,"o"},; //ö
  {147,"o"},; //õ
  {163,"u"},; //ú
  {129,"u"},; //ü
  {150,"u"},; //û
  {143,"a"},; //Á 
  {144,"e"},; //É 
  {140,"i"},; //Í 
  {141,"i"},; //Í 
  {149,"o"},; //Ó 
  {153,"o"},; //Ö 
  {167,"o"},; //Õ 
  {151,"u"},; //Ú 
  {154,"u"},; //Ü 
  {152,"u"} } //Û 
 

****************************************************************************
function main()

    set printer to chartab.h
    set printer on
    set console off

    //chrtab({},"identical")
    chrtab(ccc2cwi,"ccc2cwi")
    chrtab(cwi2ccc,"cwi2ccc")
    chrtab(ccc2lat,"ccc2lat")
    chrtab(lat2ccc,"lat2ccc")
    chrtab(ccc2win,"ccc2win")
 
    chrtab(cwi2search,"cwi2search")
    chrtab(upper2lower,"upper2lower")
    chrtab(lower2upper,"lower2upper")
    
    ?

    return NIL

****************************************************************************
static function chrtab(tab,name)

local n,i,c,c1

    ?
    ? "static char chartab_"+name+"[256]={"

    for n:=0 to 255
    
        if( (n%16)==0 )
            ?? crlf()
        end
        
        c:=n
        for i:=1 to len(tab)
            c1:=tab[i][1]
            if( valtype(c1)=="C" )
                c1:=asc(c1)
            end
            if( c==c1 )
                c:=tab[i][2] 
                if( valtype(c)=="C" )
                    c:=asc(c)
                end
                exit
            end
        next

        
        ?? "(char)0x"+right("00"+l2hex(c),2)+if(n<255,",","")
    next
    
    ?? "};"

    return NIL


****************************************************************************
static function chrtab_old(tab,name)

local n,i,c
local type:=valtype(tab[1][1])

    ?
    ? "static char chartab_"+name+"[256]={"

    for n:=0 to 255
    
        if( (n%16)==0 )
            ?? crlf()
        end

        
        if( type=="N" )
        
            i:=ascan(tab,{|a|a[1]==n})
        
            if( i>0 )
                c:=tab[i][2]
            else
                c:=n
            end

        else //type=="C" 
        
            i:=ascan(tab,{|a|asc(a[1])==n})
        
            if( i>0 )
                c:=asc(tab[i][2])
            else
                c:=n
            end
        end

        
        ?? "(char)0x"+right("00"+l2hex(c),2)+if(n<255,",","")
    next
    
    ?? "};"

    return NIL

****************************************************************************
 